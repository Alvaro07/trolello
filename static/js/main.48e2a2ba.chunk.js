(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(46),c=a.n(s),o=a(15),i=a(26),l=a(6),u=a(2),d=function(e){return{type:"SET_LOGIN",boolean:e}},m=function(e){return{type:"SET_USER",data:e}},f=function(e){return{type:"SHOW_MODAL",modal:e}},p=function(e){return{type:"SET_BOARDS",boards:e}},b=function(e){return{type:"SET_DATA_BOARD",data:e}},h=a(47),E=Object(h.b)(function(e,t){var a=Object(u.a)({},e);switch(t.type){case"SET_LOADING":return Object(u.a)({},a,{isLoading:t.boolean});case"SET_LOGIN":return Object(u.a)({},a,{isLogin:t.boolean});case"SET_USER":return Object(u.a)({},a,{dataUser:t.data});case"SHOW_MODAL":return Object(u.a)({},a,{modal:t.modal});case"HIDE_MODAL":return Object(u.a)({},a,{modal:null});case"SET_BOARDS":return Object(u.a)({},a,{userBoards:t.boards});case"SET_DATA_BOARD":return Object(u.a)({},a,{boardData:t.data});default:return a}},{isLogin:!1},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__()),g=(a(87),a(5)),O=a(7),_=a.n(O),k=a(12),v=a(20),j=a.n(v),w=(a(136),a(138),a(163),a(142),{apiKey:"AIzaSyBX9MFiIyLvo3f9athVr7r9aWCd69mfINA",authDomain:"trolello-react.firebaseapp.com",databaseURL:"https://trolello-react.firebaseio.com",projectId:"trolello-react",storageBucket:"trolello-react.appspot.com",messagingSenderId:"682014830422"});j.a.initializeApp(w);new j.a.auth.GoogleAuthProvider;var y=j.a.auth(),x=(j.a.storage(),j.a.functions(),j.a.firestore());j.a;function N(){return(N=Object(k.a)(_.a.mark(function e(t,a,n){var r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,M(t);case 4:return e.abrupt("return",{exists:!0,message:"The user name already exists"});case 7:e.prev=7,e.t0=e.catch(1);case 9:return e.prev=9,e.next=12,D(a,n);case 12:r=e.sent,e.next=18;break;case 15:return e.prev=15,e.t1=e.catch(9),e.abrupt("return",e.t1);case 18:return e.next=20,T(t,a,n,r.user.uid);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}},e,null,[[1,7],[9,15]])}))).apply(this,arguments)}function T(e,t,a,n){return new Promise(function(r,s){x.collection("users").doc(e).set({user:e,email:t,password:a,id:n,boards:[]}).then(function(e){return r()}).catch(function(e){return s(e)})})}function D(e,t){return new Promise(function(a,n){y.createUserWithEmailAndPassword(e,t).then(function(e){return a(e)}).catch(function(e){return n(e)})})}function S(e,t){return new Promise(function(a,n){y.signInWithEmailAndPassword(e,t).then(function(){return a()}).catch(function(e){return n(e)})})}function M(e){return new Promise(function(t,a){x.collection("users").where("user","==",e).get().then(function(e){return e.empty?a("The user not exists"):e.forEach(function(e){return t(e.data())})}).catch(function(e){return a(e)})})}var L=a(8),C=(a(144),function(e){var t=e.extraClass?e.extraClass:"",a=e.error?"c-input-text--error":"";return r.a.createElement("div",{className:"c-input-text ".concat(a," ").concat(t)},e.labelText&&r.a.createElement("label",{className:"c-input-text__label",htmlFor:e.id},e.labelText),r.a.createElement("div",{className:"c-input-text__field"},e.icon&&r.a.createElement("div",{className:"c-input-text__icon"},r.a.createElement(L.a,{icon:e.icon})),r.a.createElement("input",{type:e.type,id:e.id,placeholder:e.placeholder,onKeyUp:e.onKeyUp,required:e.required?"required":null,defaultValue:e.value?e.value:""})))}),B=(a(145),function(e){var t=e.text,a=e.secondary,n=e.terciary,s=e.size,c=e.extraClass,o=e.onClick,i=e.icon,l=e.submit,u=e.isLoading,d=c||"",m=a?"c-button--secondary":"",f=n?"c-button--terciary":"",p=s&&"small"===s?"c-button--small":"",b=i?r.a.createElement(L.a,{icon:i,className:"c-button__icon"}):"";return r.a.createElement("button",{className:"c-button ".concat(m," ").concat(f," ").concat(u?"c-button--loading":""," ").concat(p," ").concat(d),onClick:o,type:l?"submit":null},!u&&b,u?r.a.createElement(L.a,{icon:"spinner",className:"c-button__load-icon"}):null,u?"Loading":t)}),U=(a(146),function(){return r.a.createElement("div",{className:"loader-wrap"},r.a.createElement("div",{className:"c-loader"}))}),V=(a(147),Object(l.b)(function(e){return{state:e}},function(e){return{setLogin:function(t){return e(d(t))},setUser:function(t){return e(m(t))}}})(function(e){var t=Object(n.useState)({user:"",password:"",isValid:!0,errorMessage:"Complete all the fields to login"}),a=Object(g.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)({user:"",email:"",password:"",isValid:!0,errorMessage:"The register is not complete"}),l=Object(g.a)(o,2),d=l[0],m=l[1],f=Object(n.useState)(!1),p=Object(g.a)(f,2),b=p[0],h=p[1],E=Object(n.useState)(!0),O=Object(g.a)(E,2),_=O[0],k=O[1],v=Object(n.useState)(!1),j=Object(g.a)(v,2),w=j[0],y=j[1],x=Object(n.useState)(!1),T=Object(g.a)(x,2),D=T[0],L=T[1];Object(n.useEffect)(function(){localStorage.user?M(localStorage.user).then(function(t){S(t.email,localStorage.password).then(function(){e.setUser(t),e.setLogin(!0),k(!1)})}):k(!1)},[]),Object(n.useEffect)(function(){setTimeout(function(){h(!1)},500)},[b]);var V=function(t){t.preventDefault(),L(!0),d.user.length&&d.email.length&&d.password.length?function(e,t,a){return N.apply(this,arguments)}(d.user,d.email,d.password).then(function(t){t.message?(m(Object(u.a)({},d,{isValid:!1,errorMessage:t.message})),h(!0),L(!1)):(m(Object(u.a)({},d,{isValid:!0})),e.setUser({user:d.user,email:d.email}),e.setLogin(!0),localStorage.setItem("user",d.user),localStorage.setItem("password",d.password))}):(m(Object(u.a)({},d,{isValid:!1})),h(!0),L(!1))};return _?r.a.createElement(U,null):e.state.isLogin?r.a.createElement(i.a,{from:"/trollelo/",to:"/trollelo/dashboard"}):r.a.createElement("section",{className:"login-wrap"},r.a.createElement("header",{className:"login-wrap__header"},r.a.createElement("h1",{className:"login-wrap__header__brand"},"Trolello")),r.a.createElement("main",{className:"login ".concat(!0===b?"login--shake":"")},r.a.createElement("form",{className:"login__form",method:"POST"},r.a.createElement("h2",{className:"login__title"},"Sign in"),r.a.createElement(C,{type:"text",id:"signInUser",placeholder:"User",extraClass:"margin-bottom-10",icon:"user",onKeyUp:function(e){return c(Object(u.a)({},s,{user:e.target.value}))},error:!1===s.isValid&&!s.user.length,required:!0}),r.a.createElement(C,{type:"password",id:"signInPassword",placeholder:"Password",extraClass:"margin-bottom-20",icon:"key",onKeyUp:function(e){return c(Object(u.a)({},s,{password:e.target.value}))},error:!1===s.isValid&&!s.password.length,required:!0}),r.a.createElement(B,{text:"Log in",onClick:function(t){return function(t){t.preventDefault(),y(!0),s.user.length&&s.password.length?(c(Object(u.a)({},s,{isValid:!0})),M(s.user).then(function(t){S(t.email,s.password).then(function(){localStorage.setItem("user",s.user),localStorage.setItem("password",s.password),e.setUser({user:t.user,email:t.email}),e.setLogin(!0)}).catch(function(e){y(!1),c(Object(u.a)({},s,{isValid:!1,errorMessage:e.message})),h(!0)})}).catch(function(e){y(!1),c(Object(u.a)({},s,{isValid:!1,errorMessage:e})),h(!0)})):(c(Object(u.a)({},s,{isValid:!1})),h(!0),y(!1))}(t)},submit:!0,isLoading:w}),!1===s.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},s.errorMessage)),r.a.createElement("form",{className:"login__form",method:"POST"},r.a.createElement("h2",{className:"login__title"},"Register"),r.a.createElement(C,{type:"text",id:"registerUser",placeholder:"User",icon:"user",extraClass:"margin-bottom-10",onKeyUp:function(e){return m(Object(u.a)({},d,{user:e.target.value}))},error:!1===d.isValid&&!d.user.length,required:!0}),r.a.createElement(C,{type:"email",id:"registerEmail",placeholder:"Email",icon:"envelope",extraClass:"margin-bottom-10",onKeyUp:function(e){return m(Object(u.a)({},d,{email:e.target.value}))},error:!d.isValid&&!d.email.length,required:!0}),r.a.createElement(C,{type:"password",id:"registerPassword",placeholder:"Password",icon:"key",extraClass:"margin-bottom-20",onKeyUp:function(e){return m(Object(u.a)({},d,{password:e.target.value}))},error:!1===d.isValid&&!d.password.length,required:!0}),r.a.createElement(B,{text:"Register",type:"secondary",onClick:function(e){return V(e)},submit:!0,isLoading:D}),!1===d.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},d.errorMessage))))})),A=a(21);function P(){return(P=Object(k.a)(_.a.mark(function e(t,a,n){var r,s;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:return r=e.sent,e.next=5,I(t,a,n);case 5:return s=e.sent,e.next=8,R(r.boards,s,r.user);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e,t,a){return new Promise(function(n,r){var s=x.collection("boards").doc();s.set({owner:e,name:t,description:a,id:s.id,tasklists:[]}).then(function(){return n(s.id)}).catch(function(e){return r(e)})})}function R(e,t,a){return new Promise(function(n,r){x.collection("users").doc(a).update({boards:[].concat(Object(A.a)(e),[t])}).then(function(){return n()}).catch(function(e){return r(e)})})}function K(e){return new Promise(function(t,a){x.collection("boards").doc(e).get().then(function(e){return t(e.data())}).catch(function(e){return a(e)})})}function q(e){return new Promise(function(t,a){x.collection("boards").get().then(function(n){var r=[];return n.forEach(function(e){r.push(e.data())}),n.empty?a("no boards"):t(r.filter(function(t){return t.owner===e}))}).catch(function(e){return a(e)})})}function F(){return(F=Object(k.a)(_.a.mark(function e(t,a){var n,r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.collection("users").doc(a),e.next=3,x.collection("boards").doc(t).delete();case 3:return e.next=5,M(a);case 5:return r=e.sent,e.next=8,n.update({boards:r.boards.filter(function(e){return e!==t})});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}a(153);var H=Object(l.b)(function(e){return{state:e}},function(e){return{setLogin:function(t){return e(d(t))},setUser:function(t){return e(m(t))},setBoards:function(t){return e(p(t))}}})(function(e){var t=null;return void 0!==e.location&&e.location.pathname.match("TaskBoard")&&(t=r.a.createElement("div",{className:"c-header__return-btn"},r.a.createElement(o.b,{to:"/trollelo/dashboard"},r.a.createElement(L.a,{icon:"align-left"})))),r.a.createElement("header",{className:"c-header"},r.a.createElement("div",{className:"c-header__wrap"},t,r.a.createElement("h1",{className:"c-header__logo"},r.a.createElement(o.b,{to:"/trollelo/dashboard"},"Trollelo")),r.a.createElement("div",{className:"c-header__actions"},r.a.createElement(B,{secondary:!0,text:"logOut",size:"small",icon:"sign-in-alt",onClick:function(){return localStorage.clear(),e.setLogin(!1),e.setUser(null),void e.setBoards(null)}}))))});var z=function(e){var t=Object(n.useRef)(null);return Object(n.useEffect)(function(){var a,n=document.querySelector("#".concat(e)),r=n||function(e){var t=document.createElement("div");return t.setAttribute("id",e),t}(e);return n||(a=r,document.body.insertBefore(a,document.body.lastElementChild.nextElementSibling)),r.appendChild(t.current),function(){t.current.remove(),-1===r.childNodes.length&&r.remove()}},[]),t.current||(t.current=document.createElement("div")),t.current},W=a(3),X=function(e){var t=e.children,a=z("modal");return Object(s.createPortal)(t,a)};X.propTypes={children:a.n(W).a.element.isRequired};var G=X,J=(a(154),Object(l.b)(function(e){return{state:e}},function(e){return{hideModal:function(){return e({type:"HIDE_MODAL"})}}})(function(e){var t=e.modalTitle?r.a.createElement("h2",{className:"c-modal__title"},e.modalTitle):"",a="small"===e.type?"c-modal__container--small":"",s=Object(n.useRef)();Object(n.useEffect)(function(){return setTimeout(function(){return s.current.style.setProperty("--modal-opacity",1)},100),function(){s.current.style.setProperty("--modal-opacity",0)}},[]);return r.a.createElement("div",{className:"c-modal",ref:s},r.a.createElement("div",{className:"c-modal__container ".concat(a)},t,e.children,r.a.createElement(L.a,{icon:"times",className:"c-modal__button-close",onClick:function(){return s.current.style.setProperty("--modal-opacity",0),setTimeout(function(){return e.hideModal()},100),void(e.onClose&&e.onClose())}})))})),Q=(a(155),function(e){var t=e.noResize?"c-textarea--no-resize":"",a=e.extraClass?e.extraClass:"",n=e.error?"c-textarea--error":"";return r.a.createElement("div",{className:"c-textarea"},e.labelText&&r.a.createElement("label",{className:"c-textarea__label",htmlFor:e.id},e.labelText),r.a.createElement("textarea",{className:"c-textarea__field ".concat(n," ").concat(t," ").concat(a),placeholder:e.placeholder,onKeyUp:e.onKeyUp,defaultValue:e.value?e.value:""}))});function Y(e,t){return e.length>=t?"".concat(e.slice(0,t),"..."):e}a(156);var Z=Object(l.b)(function(e){return{state:e}},function(e){return{showModal:function(t){return e(f(t))},hideModal:function(){return e({type:"HIDE_MODAL"})},setBoards:function(t){return e(p(t))}}})(function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),s=a[0],c=a[1],i=function(t){t.preventDefault(),c(!0),function(e,t){return F.apply(this,arguments)}(e.id,e.state.dataUser.user).then(function(){q(e.state.dataUser.user).then(function(t){c(!1),e.hideModal(),e.setBoards(t)}).catch(function(){return e.setBoards([])})})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("figure",{className:"c-board-card"},r.a.createElement("h3",{className:"c-board-card__name"},r.a.createElement(o.b,{to:"/trollelo/TaskBoard/".concat(e.id)},e.name)),r.a.createElement("p",null," ",Y(e.description,250)," "),r.a.createElement("div",{className:"c-board-card__delete",onClick:function(){return e.showModal("modal-remove-board".concat(e.id))}},r.a.createElement(L.a,{icon:"trash"}),"Remove")),e.state.modal==="modal-remove-board".concat(e.id)&&r.a.createElement(G,null,r.a.createElement(J,{modalTitle:"Remove board",type:"small"},r.a.createElement("form",null,r.a.createElement("p",{className:"margin-bottom-20"},r.a.createElement("span",{className:"bold"},"Are you sure")," to remove this Board?"),r.a.createElement(B,{text:"Remove Board",onClick:function(e){return i(e)},isLoading:s})))))}),$=(a(157),Object(l.b)(function(e){return{state:e}},function(e){return{showModal:function(t){return e(f(t))},hideModal:function(){return e({type:"HIDE_MODAL"})},setBoards:function(t){return e(p(t))}}})(function(e){var t=Object(n.useState)({name:"",description:"",errorMessage:"Complete all the fields",isValid:!0}),a=Object(g.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(!0),l=Object(g.a)(o,2),d=l[0],m=l[1],f=Object(n.useState)(!1),p=Object(g.a)(f,2),b=p[0],h=p[1];Object(n.useEffect)(function(){e.state.isLogin&&q(e.state.dataUser.user).then(function(t){e.setBoards(t),m(!1)}).catch(function(t){e.setBoards([]),m(!1)})},[]);var E=function(t){t.preventDefault(),0!==s.name.length&&0!==s.description.length?(h(!0),c(Object(u.a)({},s,{errorMessage:""})),function(e,t,a){return P.apply(this,arguments)}(e.state.dataUser.user,s.name,s.description).then(function(t){c(Object(u.a)({},s,{isValid:!0,name:"",description:""})),e.hideModal(),h(!1),q(e.state.dataUser.user).then(function(t){e.setBoards(t)}).catch(function(){return e.setBoards([])})})):(h(!1),c(Object(u.a)({},s,{isValid:!1})))};return e.state.isLogin?d?r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement(U,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement("main",{className:"dashboard"},r.a.createElement("header",{className:"subheader"},r.a.createElement("div",{className:"subheader__content"},r.a.createElement("span",{className:"subheader__icon"},r.a.createElement(L.a,{icon:"align-left"})),r.a.createElement("div",{className:"subheader__title"},r.a.createElement("h2",null,"My Dashboard"),r.a.createElement("span",{className:"subheader__title__user"},"User: ",e.state.dataUser.user))),r.a.createElement("div",{className:"subheader__actions"},r.a.createElement(B,{text:"New Board",onClick:function(){return e.showModal("new-board")}}))),r.a.createElement("section",{className:"dashboard__table"},e.state.userBoards&&e.state.userBoards.map(function(t,a){return r.a.createElement(Z,{key:a,name:e.state.userBoards[a].name,description:e.state.userBoards[a].description,id:e.state.userBoards[a].id})}),"new-board"===e.state.modal&&r.a.createElement(G,null,r.a.createElement(J,{modalTitle:"Add new board",type:"small",onClose:function(){c(Object(u.a)({},s,{name:"",description:"",isValid:!0}))}},r.a.createElement("form",{method:"POST"},r.a.createElement(C,{type:"text",id:"newBoardName",placeholder:"Board Name",icon:"columns",extraClass:"margin-bottom-10",onKeyUp:function(e){return c(Object(u.a)({},s,{name:e.target.value}))},error:!1===s.isValid&&!s.name.length,required:!0}),r.a.createElement(Q,{placeholder:"Description",noResize:!0,extraClass:"margin-bottom-20",onKeyUp:function(e){return c(Object(u.a)({},s,{description:e.target.value}))},error:!1===s.isValid&&!s.description.length,required:!0}),r.a.createElement(B,{text:"Create Board",onClick:function(e){return E(e)},submit:!0,isLoading:b}),!1===s.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},s.errorMessage))))))):r.a.createElement(i.a,{from:"/",to:"/login"})}));function ee(){return(ee=Object(k.a)(_.a.mark(function e(t,a,n){var r,s;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(a);case 2:return r=e.sent,e.next=5,te(t,a,n,r.tasklists);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function te(e,t,a,n){return new Promise(function(r,s){var c={title:a,owner:e,tasks:[]};x.collection("boards").doc(t).update({tasklists:[].concat(Object(A.a)(n),[c])}).then(function(){return r(c)}).catch(function(e){return s(e)})})}function ae(){return(ae=Object(k.a)(_.a.mark(function e(t,a){var n,r;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=x.collection("boards").doc(a),e.next=3,K(a);case 3:return r=e.sent,e.next=6,n.update({tasklists:r.tasklists.filter(function(e,a){return a!==t})});case 6:return e.next=8,K(a);case 8:return r=e.sent,e.abrupt("return",r.tasklists);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ne(e,t,a,n,r){var s=x.collection("boards").doc(n.id),c=n;return new Promise(function(n,o){var i={title:e,description:t,owner:a,images:[],tags:[],comments:[]};c.tasklists[r].tasks=[].concat(Object(A.a)(c.tasklists[r].tasks),[i]),s.set(c).then(function(){return n(c)}).catch(function(e){return o(e)})})}function re(){return(re=Object(k.a)(_.a.mark(function e(t,a,n,r,s){var c,o;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(r);case 2:return c=e.sent,e.next=5,ne(t,a,n,c,s);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function se(e,t,a,n,r,s){var c=x.collection("boards").doc(n.id),o=n;return new Promise(function(n,i){var l={title:e,description:t,owner:a,images:[],tags:[],comments:[]};o.tasklists[r].tasks[s]=l,c.set(o).then(function(){return n(o)}).catch(function(e){return i(e)})})}function ce(){return(ce=Object(k.a)(_.a.mark(function e(t,a,n,r,s,c){var o,i;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(r);case 2:return o=e.sent,e.next=5,se(t,a,n,o,s,c);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e,t,a){var n=x.collection("boards").doc(e.id),r=e;return new Promise(function(e,s){r.tasklists[t].tasks=r.tasklists[t].tasks.filter(function(e,t){return t!==a}),n.set(r).then(function(){return e(r)}).catch(function(e){return s(e)})})}function ie(){return(ie=Object(k.a)(_.a.mark(function e(t,a,n){var r,s;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:return r=e.sent,e.next=5,oe(r,a,n);case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}a(158);var le=Object(l.b)(function(e){return{state:e}},function(e){return{showModal:function(t){return e(f(t))},hideModal:function(){return e({type:"HIDE_MODAL"})},setDataBoard:function(t){return e(b(t))}}})(function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(!1),i=Object(g.a)(o,2),l=i[0],d=i[1],m=Object(n.useState)({title:e.state.boardData.tasklists[e.idTaskList].tasks[e.idTask].title,description:e.state.boardData.tasklists[e.idTaskList].tasks[e.idTask].description,errorMessage:"Complete the title field",isValid:!0}),f=Object(g.a)(m,2),p=f[0],b=f[1],h=function(t){t.preventDefault(),c(!0),p.title.length?(c(!0),function(e,t,a,n,r,s){return ce.apply(this,arguments)}(p.title,p.description,e.state.dataUser.user,e.state.boardData.id,e.idTaskList,e.idTask).then(function(t){e.setDataBoard(t),c(!1),b(Object(u.a)({},p,{title:"",description:"",isValid:!0})),e.hideModal()})):(c(!1),b(Object(u.a)({},p,{isValid:!1})))},E=function(t){t.preventDefault(),d(!0),function(e,t,a){return ie.apply(this,arguments)}(e.state.boardData.id,e.idTaskList,e.idTask).then(function(t){d(!1),e.hideModal(),e.setDataBoard(t)})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"c-task"},r.a.createElement("h3",{className:"c-task__title",onClick:function(){return e.showModal("task-".concat(e.idTask).concat(e.idTaskList))}},Y(e.title,150))),e.state.modal==="task-".concat(e.idTask).concat(e.idTaskList)&&r.a.createElement(G,null,r.a.createElement(J,{modalTitle:"Edit task"},r.a.createElement("form",{method:"POST"},r.a.createElement(C,{type:"text",id:"taskTitle",labelText:"Title:",icon:"columns",extraClass:"margin-bottom-20",onKeyUp:function(e){return b(Object(u.a)({},p,{title:e.target.value}))},error:!1===p.isValid&&!p.title.length,required:!0,value:e.state.boardData.tasklists[e.idTaskList].tasks[e.idTask].title}),r.a.createElement(Q,{labelText:"Description:",extraClass:"margin-bottom-20",onKeyUp:function(e){return b(Object(u.a)({},p,{description:e.target.value}))},value:e.state.boardData.tasklists[e.idTaskList].tasks[e.idTask].description}),r.a.createElement(B,{text:"Update task",onClick:function(e){return h(e)},submit:!0,isLoading:s}),r.a.createElement(B,{text:"Remove task",extraClass:"margin-left-10",onClick:function(e){return E(e)},secondary:!0,isLoading:l}),!1===p.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},p.errorMessage)))))}),ue=(a(159),Object(l.b)(function(e){return{state:e}},function(e){return{showModal:function(t){return e(f(t))},hideModal:function(){return e({type:"HIDE_MODAL"})},setDataBoard:function(t){return e(b(t))}}})(function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)({title:"",description:"",errorMessage:"Complete the title field",isValid:!0}),i=Object(g.a)(o,2),l=i[0],d=i[1],m=function(t){t.preventDefault(),c(!0),function(e,t){return ae.apply(this,arguments)}(e.id,e.state.boardData.id).then(function(t){e.hideModal(),c(!1),e.setDataBoard(Object(u.a)({},e.state.boardData,{tasklists:t}))})},f=function(t,a){t.preventDefault(),c(!0),l.title.length?(c(!0),d(Object(u.a)({},l,{errorMessage:""})),function(e,t,a,n,r){return re.apply(this,arguments)}(l.title,l.description,e.state.dataUser.user,e.state.boardData.id,a).then(function(t){e.setDataBoard(t),c(!1),d(Object(u.a)({},l,{title:"",description:"",isValid:!0})),e.hideModal()})):(c(!1),d(Object(u.a)({},l,{isValid:!1})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"c-tasklist","data-id":e.id},r.a.createElement("header",{className:"c-tasklist__header"},r.a.createElement("h2",{className:"c-tasklist__header__title",title:e.name},Y(e.name,140)),r.a.createElement("span",{className:"c-tasklist__header__remove",onClick:function(){return e.showModal("remove-tasklist-".concat(e.id))}},r.a.createElement(L.a,{icon:"trash-alt"}))),r.a.createElement("main",{className:"c-tasklist__tasks"},e.state.boardData.tasklists[e.id].tasks.map(function(t,a){return r.a.createElement(le,{title:t.title,key:a,idTask:a,idTaskList:e.id})})),r.a.createElement("footer",{className:"c-tasklist__footer"},r.a.createElement("span",{className:"c-tasklist__footer__add-task",onClick:function(){return e.showModal("add-task-".concat(e.id))}},"+ Add task"))),e.state.modal==="remove-tasklist-".concat(e.id)&&r.a.createElement(G,null,r.a.createElement(J,{modalTitle:"Remove task",type:"small"},r.a.createElement("form",null,r.a.createElement("p",{className:"margin-bottom-20"},r.a.createElement("span",{className:"bold"},"Are you sure")," to remove this tasklist?"),r.a.createElement(B,{text:"Remove Board",onClick:function(e){return m(e)},isLoading:s})))),e.state.modal==="add-task-".concat(e.id)&&r.a.createElement(G,null,r.a.createElement(J,{modalTitle:"Add new task",type:"small",onClose:function(){d(Object(u.a)({},l,{title:"",description:"",isValid:!0}))}},r.a.createElement("form",{method:"POST"},r.a.createElement(C,{type:"text",id:"newTaskTitle",placeholder:"Task title",icon:"columns",extraClass:"margin-bottom-10",onKeyUp:function(e){return d(Object(u.a)({},l,{title:e.target.value}))},error:!1===l.isValid&&!l.title.length,required:!0}),r.a.createElement(Q,{placeholder:"Description",noResize:!0,extraClass:"margin-bottom-20",onKeyUp:function(e){return d(Object(u.a)({},l,{description:e.target.value}))}}),r.a.createElement(B,{text:"Create new task",onClick:function(t){return f(t,e.id)},submit:!0,isLoading:s}),!1===l.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},l.errorMessage)))))})),de=(a(160),Object(l.b)(function(e){return{state:e}},function(e){return{showModal:function(t){return e(f(t))},hideModal:function(){return e({type:"HIDE_MODAL"})},setDataBoard:function(t){return e(b(t))}}})(function(e){var t=Object(n.useState)({name:"",errorMessage:"Complete all the fields",isValid:!0}),a=Object(g.a)(t,2),s=a[0],c=a[1],o=Object(n.useState)(!0),l=Object(g.a)(o,2),d=l[0],m=l[1],f=Object(n.useState)(!1),p=Object(g.a)(f,2),b=p[0],h=p[1];Object(n.useEffect)(function(){e.state.isLogin&&K(e.match.params.board).then(function(t){e.setDataBoard(t),m(!1)})},[]);var E=function(t){t.preventDefault(),0!==s.name.length?(h(!0),c(Object(u.a)({},s,{errorMessage:""})),function(e,t,a){return ee.apply(this,arguments)}(e.state.dataUser.user,e.state.boardData.id,s.name).then(function(t){e.setDataBoard(Object(u.a)({},e.state.boardData,{tasklists:[].concat(Object(A.a)(e.state.boardData.tasklists),[t])})),h(!1),e.hideModal()})):(h(!1),c(Object(u.a)({},s,{isValid:!1})))};return e.state.isLogin?d?r.a.createElement(r.a.Fragment,null,r.a.createElement(H,null),r.a.createElement(U,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(H,e),r.a.createElement("main",{className:"taskboard"},r.a.createElement("header",{className:"subheader"},r.a.createElement("div",{className:"subheader__content"},r.a.createElement("span",{className:"subheader__icon"},r.a.createElement(L.a,{icon:"pencil-alt"})),r.a.createElement("div",{className:"subheader__title"},r.a.createElement("h2",null,"Board: ",e.state.boardData.name),r.a.createElement("span",{className:"subheader__title__user"},"Owner: ",e.state.boardData.owner))),r.a.createElement("div",{className:"subheader__actions"},r.a.createElement(B,{text:"New Task List",onClick:function(){return e.showModal("new-task-list")}}))),r.a.createElement("section",{className:"taskboard__table"},r.a.createElement("div",{className:"taskboard__table__scroll-wrap"},e.state.boardData.tasklists&&e.state.boardData.tasklists.map(function(e,t){return r.a.createElement(ue,{key:t,id:t,name:e.title})}))),"new-task-list"===e.state.modal&&r.a.createElement(G,null,r.a.createElement(J,{modalTitle:"Add new task list",type:"small"},r.a.createElement("form",{method:"POST"},r.a.createElement(C,{type:"text",id:"newTaskListName",placeholder:"Task list Name",icon:"pencil-alt",extraClass:"margin-bottom-20",onKeyUp:function(e){return c(Object(u.a)({},s,{name:e.target.value}))},error:!1===s.isValid&&!s.name.length,required:!0}),r.a.createElement(B,{text:"Create Task list",onClick:function(e){return E(e)},submit:!0,isLoading:b}),!1===s.isValid&&r.a.createElement("p",{className:"color-orange bold padding-top-20"},s.errorMessage)))))):r.a.createElement(i.a,{from:"/",to:"/login"})})),me=Object(l.b)(function(e){return{state:e}},null)(function(e){return Object(n.useEffect)(function(){document.title="Trollelo"},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/trollelo/login",render:function(e){return r.a.createElement(V,e)}}),r.a.createElement(i.b,{exact:!0,path:"/trollelo/dashboard",render:function(){return r.a.createElement($,null)}}),r.a.createElement(i.b,{path:"/trollelo/taskBoard/:board",render:function(e){return r.a.createElement(de,e)}}),r.a.createElement(i.a,{from:"/",to:"/trollelo/login"}),r.a.createElement(i.a,{from:"/",to:e.state.isLogin?"/trollelo/dashboard":"/trollelo/login"}),r.a.createElement(i.b,{render:function(){return r.a.createElement("div",null,"Page not found")}})))}),fe=a(30),pe=a(13);fe.b.add(pe.f,pe.b,pe.h,pe.k,pe.d,pe.c,pe.i,pe.a,pe.g,pe.e,pe.j);fe.b,a(161);var be=document.getElementById("root");c.a.render(r.a.createElement(l.a,{store:E},r.a.createElement(o.a,null,r.a.createElement(i.b,{path:"/",component:me}))),be)},78:function(e,t,a){e.exports=a(162)},87:function(e,t,a){}},[[78,1,2]]]);
//# sourceMappingURL=main.48e2a2ba.chunk.js.map